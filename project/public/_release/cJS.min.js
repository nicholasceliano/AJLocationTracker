/*! LocationMonitor 2014-08-06 */
var mapLegend;!function(a){function b(){setTimeout(function(){webIO.socket.emit("moveMarker"),b()},3e3)}function c(a){$.each(webIO.markers,function(b,c){c.id.indexOf(a)>=0&&($(event.target).is(":checked")?c.setVisible(!0):(c.setVisible(!1),webIO.infoWindow.markerID==c.id&&webIO.infoWindow.close()))})}a.test=b,a.ToggleMarkers=c}(mapLegend||(mapLegend={}));var NJ=[new google.maps.LatLng(41.3572,-74.695),new google.maps.LatLng(41.3394,-74.6559),new google.maps.LatLng(40.9934,-73.894),new google.maps.LatLng(40.8398,-73.9586),new google.maps.LatLng(40.7691,-74.0094),new google.maps.LatLng(40.6994,-74.0231),new google.maps.LatLng(40.6786,-74.0437),new google.maps.LatLng(40.6515,-74.0808),new google.maps.LatLng(40.6421,-74.1357),new google.maps.LatLng(40.6452,-74.1962),new google.maps.LatLng(40.5952,-74.2003),new google.maps.LatLng(40.5566,-74.2195),new google.maps.LatLng(40.4877,-74.2552),new google.maps.LatLng(40.4762,-74.2264),new google.maps.LatLng(40.5253,-73.9503),new google.maps.LatLng(40.4846,-73.8885),new google.maps.LatLng(40.0045,-73.9352),new google.maps.LatLng(39.6131,-74.041),new google.maps.LatLng(39.4744,-74.2209),new google.maps.LatLng(38.9882,-74.6713),new google.maps.LatLng(38.8664,-74.8553),new google.maps.LatLng(38.8472,-75.0476),new google.maps.LatLng(39.0565,-75.1685),new google.maps.LatLng(39.2525,-75.325),new google.maps.LatLng(39.45,-75.5544),new google.maps.LatLng(39.4966,-75.5612),new google.maps.LatLng(39.4998,-75.5283),new google.maps.LatLng(39.5411,-75.5338),new google.maps.LatLng(39.5761,-75.509),new google.maps.LatLng(39.6237,-75.5708),new google.maps.LatLng(39.6713,-75.5104),new google.maps.LatLng(39.7167,-75.4843),new google.maps.LatLng(39.8033,-75.4156),new google.maps.LatLng(39.836,-75.2632),new google.maps.LatLng(39.8823,-75.1918),new google.maps.LatLng(40.118,-74.7922),new google.maps.LatLng(40.139,-74.7331),new google.maps.LatLng(40.2565,-74.8485),new google.maps.LatLng(40.3361,-74.9419),new google.maps.LatLng(40.402,-74.9721),new google.maps.LatLng(40.424,-75.0627),new google.maps.LatLng(40.4898,-75.0613),new google.maps.LatLng(40.5733,-75.1067),new google.maps.LatLng(40.5639,-75.2138),new google.maps.LatLng(40.6192,-75.2028),new google.maps.LatLng(40.6494,-75.2069),new google.maps.LatLng(40.8284,-75.0806),new google.maps.LatLng(40.8429,-75.0998),new google.maps.LatLng(40.8689,-75.0504),new google.maps.LatLng(40.9913,-75.1369),new google.maps.LatLng(41.2293,-74.8677),new google.maps.LatLng(41.3479,-74.7537),new google.maps.LatLng(41.3469,-74.7249),new google.maps.LatLng(41.3593,-74.696)],webIO;!function(a){a.socket=io(),a.map=null,a.markers=[],a.infoWindow,a.socket.on("loadInitialMap",function(b){a.map=new google.maps.Map(document.getElementById("trackingMap"),{center:new google.maps.LatLng(40.65,-74.28),zoom:9,mapTypeId:google.maps.MapTypeId.ROADMAP}),new google.maps.Polygon({paths:NJ,strokeColor:"#006aa9",strokeOpacity:.5,strokeWeight:5,map:a.map,fillOpacity:0});for(var c=0;c<b.length;c++)a.markers.push(new google.maps.Marker({id:b[c].ID,position:new google.maps.LatLng(b[c].lat,b[c].lng),map:a.map,html:"<div><table><tr><td>Name:</td><td>"+b[c].name+"</td><td>Address:</td><td>"+b[c].add+"</td><td>Phone #:</td><td>"+b[c].phoneNum+"</td></tr></table></div>",icon:b[c].img})),a.infoWindow=new google.maps.InfoWindow({content:"blank"}),google.maps.event.addListener(a.markers[c],"click",function(){a.infoWindow.markerID=this.id,a.infoWindow.setContent(this.html),a.infoWindow.open(a.map,this)});google.maps.event.addDomListener(window,"load",null)}),a.socket.on("loadUsersPosition",function(b,c,d){for(var e=0;e<a.markers.length;e++)if(a.markers[e].id==b)return void a.markers[e].setPosition(new google.maps.LatLng(c,d));a.markers.push(new google.maps.Marker({id:b,position:new google.maps.LatLng(c,d),map:a.map,icon:"images/westside.png"}))}),a.socket.on("passEmpInfo",function(a){function b(){var b=this;b.emps=a}ko.applyBindings(new b)}),a.socket.on("passJobInfo",function(a){function b(){var b=this;b.jobs=a}ko.applyBindings(new b)}),a.socket.on("passBusinessInfo",function(a){function b(){var b=this;b.businesses=a}ko.applyBindings(new b)})}(webIO||(webIO={}));